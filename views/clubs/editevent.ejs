<% include ../header %>

<% if(messages.notification){ %>
  <div class="alert alert-danger" id="placeholderWarning" role="alert">
    <p class="nameAlert"><span><%= messages.notification %>&nbsp;</span><a href="#" class="close nameAlert" data-dismiss="alert" data-hide="alert">&times;</a></p>
  </div>
<% } %>

<form method="post" action=<%="/editevent/"+event.clubID+"/"+event.id%>>
  <label for="title">Title:</label>
  <input type="text" name="event[name]" value="<%= event.name %>" placeholder="Title" class="form-control" required><br>

  <label for="description">Description:</label>
  <input type="text" name="event[description]" value="<%= event.description %>" placeholder="Description" class="form-control" required><br>

  <label for="location">Location:</label>
  <input type="text" name="event[location]" value="<%= event.location %>" placeholder="Location" class="form-control" required><br>

  <label for="time">Time</label>
  <select name="event[time].month" value="<%= event.time.month %>" class="form-control" required>
    <option value="0">January</option>
    <option value="1">February</option>
    <option value="2">March</option>
    <option value="3">April</option>
    <option value="4">May</option>
    <option value="0">June</option>
    <option value="0">July</option>
    <option value="0">August</option>
    <option value="0">September</option>
    <option value="0">October</option>
    <option value="0">November</option>
    <option value="0">December</option>
  </select>
  
  <select name="event[time].day" value="<%= event.time.day %>" class="form-control" required>

  </select>
  <select name="event[time].hour" value="<%= event.time.hour %>" class="form-control" required>
    <%for(i = 0; i < 24; i++) {
      if(i > 0 && i < 13) {%>
        <option value = "<%=i%>"><%=i+":00 AM"%></option>
      <%} else if(i > 13) {%>
        <option value = "<%=i%>"><%=(i-12+":00 PM"%></option>
      <%} else {%>
        <option value = "<%=i%>">12:00 AM</option>
      <%} 
      }%>
  </select>
  <select name="event[time].minute" value="<%= event.time.minute %>" class="form-control" required>
    <%for(i = 0; i < 60; i++) {%>
      <option value = "<%=i%>"><%=i%></option>
    <%}%>
  </select>
  <br>

  <label for="type">Type</label>
  <input type="text" name="event[type]" value="<%= event.type %>" placeholder="type" class="form-control" required><br>

  <label for="visible">Visible</label>
  <input type="radio" name="event[visible]" value="true"  class="form-control" checked>Yes<br>
  <input type="radio" name="event[visible]" value="false" class="form-control">No<br>


  

  <input class="btn btn-primary" class="form-control" type="submit" value="Update"><br><br>
</form>

<script>
function changeDays(m,y) {
  var days;
  if(m == 0 || m == 2 || m == 4 || m == 6 || m == 7 || m == 9 || m == 11) {
    days = 31
  }
  else if(m == 3 || m == 5 || m == 8 || m == 10) {
    days = 30
  }
  else {
    if(y%4 == 0) {
      days = 29
    }
    else {
      days = 28
    }
  }
  return days
}

$('[name="event[time].month"]').on('change', function() {
  $('[name="event[time].day"]').html() = '';
  d = changeDays($('[name="event[time].month"]').val(),$('[name="event[time].year"]').val())
  for(i = 1; i <= d; i++) {
    $('[name="event[time].day"]').append('<option value = '+i+'>'+i+'</option>');
  }
  $('[name="event[time].month"]').val() = 0;
});


d = changeDays($('[name="event[time].month"]').val(),$('[name="event[time].year"]').val())
for(i = 1; i <= d; i++) {
  $('[name="event[time].day"]').append('<option value = '+i+'>'+i+'</option>');
}
$('[name="event[time].month"]').val() = 0;

</script>
<% include ../footer %>